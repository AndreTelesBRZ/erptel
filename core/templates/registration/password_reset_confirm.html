{% extends 'core/base.html' %}

{% block title %}Definir nova senha{% endblock %}
{% block hero_title %}Definir nova senha{% endblock %}
{% block hero_subtitle %}Crie uma senha segura para voltar a usar o sistema{% endblock %}

{% block content %}
  <section class="section" style="padding-top:2rem;">
    <div class="container" style="max-width:560px;">
      <div class="card">
        <header class="card-header" style="background:linear-gradient(90deg, var(--orange), var(--orange-700));">
          <p class="card-header-title" style="color:white;">Nova senha</p>
        </header>
        <div class="card-content">
          {% if validlink %}
            <form method="post" novalidate>
              {% csrf_token %}
              <div class="field">
                <label class="label" for="{{ form.new_password1.id_for_label }}">Nova senha</label>
                <div class="control">
                  <input
                    class="input{% if form.new_password1.errors %} is-danger{% endif %}"
                    type="password"
                    name="{{ form.new_password1.html_name }}"
                    id="{{ form.new_password1.id_for_label }}"
                    autocomplete="new-password"
                    required
                  >
                </div>
                {% if form.new_password1.errors %}
                  <p class="help is-danger">{{ form.new_password1.errors.0 }}</p>
                {% endif %}
              </div>
              <div class="field">
                <label class="label" for="{{ form.new_password2.id_for_label }}">Confirme a senha</label>
                <div class="control">
                  <input
                    class="input{% if form.new_password2.errors %} is-danger{% endif %}"
                    type="password"
                    name="{{ form.new_password2.html_name }}"
                    id="{{ form.new_password2.id_for_label }}"
                    autocomplete="new-password"
                    required
                  >
                </div>
                {% if form.new_password2.errors %}
                  <p class="help is-danger">{{ form.new_password2.errors.0 }}</p>
                {% endif %}
              </div>
              <div class="field is-grouped is-justify-content-flex-end">
                <div class="control">
                  <button class="button is-primary" type="submit">Salvar nova senha</button>
                </div>
              </div>
            </form>
          {% else %}
            <div class="notification is-danger is-light">
              O link não é mais válido. Solicite uma nova redefinição de senha.
            </div>
            <a class="button is-primary" href="{% url 'password_reset' %}">Gerar novo link</a>
          {% endif %}
        </div>
      </div>
    </div>
  </section>
{% endblock %}
